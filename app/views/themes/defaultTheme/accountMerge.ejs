<div class="container">
  <br />
  <div class="jumbotron">
    <h1 class="display-4">Account Merge</h1>
    <div>
      <!-- Check if accountMerged is false -->
      <div id="merged-accounts">
        <% if ((accountMerged === false) || (accountMerged === true && accounts.length == 1)) { %>
          <p>Your account is not merged with any other account.</p>
        <% } else if (accounts.length > 1) { %>
          <p>Your account is a merger of the following accounts:</p>
          <ul id="merged-accounts-list">
            <% accounts.forEach(function(account) { %>
            <li>* <%= account.username %></li>
            <% }); %>
          </ul>
        <% } %>
      </div>
      <!-- display button only if account is merged -->
      <button
        <% if (accountMerged === true && accounts.length > 1) { %>
          style="display: block;"
        <% } else { %>
          style="display: none;"
        <% } %> id="unmerge-account-btn">
        Un Merge This Account
      </button>
      <div>
        <p>To merge an account into this account, enter a merge token that you got from another account:</p>
        <input type="text" id="merge-token-input" placeholder="Enter merge token here" />
        <button id="merge-account-btn">Merge Account</button>
        <p id="merge-status-message"></p>
      </div>
      <div>
        <p>To merge this account into another account, generate a token and enter it into the other account:</p>
        <button id="generate-token-btn">Generate a Token</button>
        <p id="token-status-message"></p>
        <p id="error-message"></p>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation Modal HTML -->
<div id="confirmation-modal">
  <div id="modal-content">
    <h4 id="modal-message"></h4>
    <button id="confirm-btn" class="btn btn-success"></button>
    <button id="cancel-btn" class="btn btn-danger">Cancel</button>
  </div>
</div>

<style>
  #confirmation-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
  #modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 5px;
    text-align: center;
    width: 300px;
    position: absolute;
    left: 40%;
    top: 30%;
  }
  button {
    margin: 10px;
  }
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script src="/js/merge-unmerge-accounts.js"></script>
